apply plugin: 'java'
apply plugin: 'eclipse'

version = '1.7-SNAPSHOT'
manifest.mainAttributes("Main-Class": "br.com.caelum.tubaina.Tubaina",
			"Class-Path": "ant-contrib-0.6.jar commons-cli-1.1.jar commons-io-1.3.1.jar freemarker-2.3.10.jar jai_codec.jar jai_core.jar jai_imageio.jar java2html-5.0.jar log4j-1.2.12.jar maven-ant-tasks-2.1.1.jar Tidy.jar ")

compileJava {
    println options
    options.encoding='UTF-8'
}

compileTestJava {
    options.encoding='UTF-8'
}

task copyToLib(type: Copy, dependsOn: jar) {
    into "$buildDir/libs"
    from configurations.runtime
}

task zip(type: Zip, dependsOn: copyToLib) {
     println "Archive Name: " + getArchiveName()
     println "Base Name: " + getBaseName()

    from("$buildDir/libs") {
        into "$buildDir"
        fileMode = 0755
        include "**/*.jar"
    }
}

repositories {
	mavenCentral()
	mavenRepo urls: 'https://repository.jboss.org/nexus/content/groups/public/'
}

dependencies {
	compile group: 'de.java2html', name: 'java2html', version: '5.0'
	compile group: 'log4j', name: 'log4j', version: '1.2.12'
	compile group: 'commons-io', name: 'commons-io', version: '1.3.1'
	compile group: 'commons-cli', name: 'commons-cli', version: '1.1'
	compile group: 'org.freemarker', name: 'freemarker', version: '2.3.10'
	compile group: 'com.sun.media', name: 'jai_codec', version: '1.1.2_01'
	compile group: 'javax.media', name: 'jai_core', version: '1.1.2_01'
	compile group: 'com.sun.media', name: 'jai_imageio', version: '1.0_01'
	testCompile group: 'junit', name: 'junit', version: '4.+'
	testCompile group: 'org.jmock', name: 'jmock', version: '2.5.1'
	lib = "$projectDir/lib"
	compile files(fileTree(dir: lib as File, includes: ['*.jar']))
}
